!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery")):"function"==typeof define&&define.amd?define("portal-telemetry",["jQuery"],t):"object"==typeof exports?exports["portal-telemetry"]=t(require("jQuery")):e["portal-telemetry"]=t(e.jQuery)}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=30)}({30:function(e,t,r){"use strict";r.r(t);var n,i=r(8),o=r(7),a=r.n(o),s=new RegExp(/(-?\d+(\.\d+)?),(-?\d+(\.\d+)?)/);function c(e,t){if("scenario-id"===e){var r=t.toLowerCase();switch(r){case"privacy.bulkdelete":case"privacy.deletepsp":return"ust.privacy.delete";case"privacy.createexportarchive":return"ust.privacy.export"}return"ust.amc.".concat(r)}return t}function u(e){return e&&n?e.startsWith("file://")?"Local filepath (REMOVED)":e.startsWith("mailto:")?"mailto:(REMOVED)":e.replace(n,"$1=REMOVED").replace(s,"REMOVED"):""}function p(e){return e.replace(s,"LATLONG_REMOVED")}var d=["BirthDay","BirthMonth","BirthYear","ConnectionToken","Country","FirstName","Gender","LastName","MemberName","Password","Phone","PhoneCountry","PhoneNumber","RetypePassword","assetId","brokenChildId","cid","cip","childCid","childId","childPuid","childsPuid","childsPuidList","e","ECID","email","iAltEmail","id","invitationToken","inviteId","ipt","memberIdList","memberId","mstoken","onBehalfOfPuid","puid","puids","rawPhoneNumber","secondaryCode","slt","t","token","userId","username","state"];function l(e){var t,r,n;window.addEventListener("error",(t=function(e){var t,r,n,i,o;r=e.filename,n=e.message,i=e.lineno,o=(null===(t=e.error)||void 0===t?void 0:t.stack)||"",window.BradburyTelemetry.qos.reportFatalError({location:window.BradburyTelemetry.bi.getCurrentLocation(),pageId:window.BradburyTelemetry.bi.getCurrentPageId(),script:r,message:n,lineNumber:i,userAgent:window.navigator.userAgent||"",ext:{Area:ne(),Stack:o}})},r=500,n=null,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];n||t.apply(void 0,e),clearTimeout(n),n=setTimeout((function(){return n=null}),r)}))}function f(e){var t=e.responseStatus||0;if(!t)return e.isSuccess=!1,e.httpStatusCode="520",e.errorMessage="Unknown Error",void(e.requestTimeout&&e.latencyMs&&e.latencyMs>=e.requestTimeout&&(e.httpStatusCode="524",e.errorMessage="A Timeout Occurred"));e.isSuccess=t<401||403===t||404===t,401===t&&e.responseDataError&&["interaction_required","invalid_grant","login_required","invalid_or_missing_json_web_token_cookie"].indexOf(e.responseDataError)>-1&&(e.isSuccess=!0)}var m,g,h,v,S,y,w=function(e,t){var r=this;this.portalAreaName=e,this.impl=t,this.reportOutgoingApi=this.impl.reportOutgoingApi,this.reportFatalError=this.impl.reportFatalError,this.reportRawEvent=this.impl.reportRawEvent,this.reportClientError=function(e){var t={name:i.e,content:{"Ms.Webi.MeePortal.Error":{userAgent:window.navigator.userAgent||"",area:r.portalAreaName},"Ms.Telemetry.Error":{}}};e.data&&(t.content[i.e].data=JSON.stringify(e.data));var n=t.content["Ms.Telemetry.Error"];n.errorLocation=window.BradburyTelemetry.bi.getCurrentLocation(),e.code&&(n.errorName=e.code),e.category&&(n.errorType=e.category),e.statusCode&&(n.errorCode=e.statusCode),e.message&&(n.errorMessage=e.message),e.method&&(n.errorMethod=e.method),e.severity&&(n.severity=e.severity),r.reportRawEvent(t)}},C=-1,T=function(e){addEventListener("pageshow",(function(t){t.persisted&&(C=t.timeStamp,e(t))}),!0)},x=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},b=function(){var e=x();return e&&e.activationStart||0},k=function(e,t){var r=x(),n="navigate";return C>=0?n="back-forward-cache":r&&(n=document.prerendering||b()>0?"prerender":r.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},E=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},P=function(e,t){var r=function r(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||(e(n),t&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},A=function(e,t,r,n){var i,o;return function(a){t.value>=0&&(a||n)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},M=-1,R=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},O=function(){P((function(e){var t=e.timeStamp;M=t}),!0)},V=function(){return M<0&&(M=R(),O(),T((function(){setTimeout((function(){M=R(),O()}),0)}))),{get firstHiddenTime(){return M}}},L=function(e,t){t=t||{};var r,n=[1800,3e3],i=V(),o=k("FCP"),a=function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(c&&c.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=e.startTime-b(),o.entries.push(e),r(!0)))}))},s=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],c=s?null:E("paint",a);(s||c)&&(r=A(e,o,n,t.reportAllChanges),s&&a([s]),T((function(i){o=k("FCP"),r=A(e,o,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,r(!0)}))}))})))},q=!1,I=-1,j={passive:!0,capture:!0},D=new Date,N=function(e,t){m||(m=t,g=e,h=new Date,Q(removeEventListener),F())},F=function(){if(g>=0&&g<h-D){var e={entryType:"first-input",name:m.type,target:m.target,cancelable:m.cancelable,startTime:m.timeStamp,processingStart:m.timeStamp+g};v.forEach((function(t){t(e)})),v=[]}},B=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){N(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,j),removeEventListener("pointercancel",n,j)};addEventListener("pointerup",r,j),addEventListener("pointercancel",n,j)}(t,e):N(t,e)}},Q=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,B,j)}))},H=0,z=1/0,U=0,W=function(e){e.forEach((function(e){e.interactionId&&(z=Math.min(z,e.interactionId),U=Math.max(U,e.interactionId),H=U?(U-z)/7+1:0)}))},$=function(){return S?H:performance.interactionCount||0},_=function(){"interactionCount"in performance||S||(S=E("event",W,{type:"event",buffered:!0,durationThreshold:0}))},J=0,G=function(){return $()-J},K=[],X={},Y=function(e){var t=K[K.length-1],r=X[e.interactionId];if(r||K.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};X[n.id]=n,K.push(n)}K.sort((function(e,t){return t.latency-e.latency})),K.splice(10).forEach((function(e){delete X[e.id]}))}},Z={},ee=function(e,t){t=t||{};var r=[800,1800],n=k("TTFB"),i=A(e,n,r,t.reportAllChanges);!function e(t){document.prerendering?addEventListener("prerenderingchange",(function(){return e(t)}),!0):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)}((function(){var o=x();if(o){if(n.value=Math.max(o.responseStart-b(),0),n.value<0||n.value>performance.now())return;n.entries=[o],i(!0),T((function(){n=k("TTFB",0),(i=A(e,n,r,t.reportAllChanges))(!0)}))}}))},te=function(){!function(e,t){t=t||{};var r=[.1,.25];q||(L((function(e){I=e.value})),q=!0);var n,i=function(t){I>-1&&e(t)},o=k("CLS",0),a=0,s=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,s.push(e)):(a=e.value,s=[e]),a>o.value&&(o.value=a,o.entries=s,n())}}))},u=E("layout-shift",c);u&&(n=A(i,o,r,t.reportAllChanges),P((function(){c(u.takeRecords()),n(!0)})),T((function(){a=0,I=-1,o=k("CLS",0),n=A(i,o,r,t.reportAllChanges)})))}((function(e){re(e.name,e.value,e.rating)})),L((function(e){re(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r,n=[100,300],i=V(),o=k("FID"),a=function(e){e.startTime<i.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),r(!0))},s=function(e){e.forEach(a)},c=E("first-input",s);r=A(e,o,n,t.reportAllChanges),c&&P((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&T((function(){var i;o=k("FID"),r=A(e,o,n,t.reportAllChanges),v=[],g=-1,m=null,Q(addEventListener),i=a,v.push(i),F()}))}((function(e){re(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r=[200,500];_();var n,i=k("INP"),o=function(e){e.forEach((function(e){e.interactionId&&Y(e),"first-input"===e.entryType&&!K.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Y(e)}));var t,r=(t=Math.min(K.length-1,Math.floor(G()/50)),K[t]);r&&r.latency!==i.value&&(i.value=r.latency,i.entries=r.entries,n())},a=E("event",o,{durationThreshold:t.durationThreshold||40});n=A(e,i,r,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),P((function(){o(a.takeRecords()),i.value<0&&G()>0&&(i.value=0,i.entries=[]),n(!0)})),T((function(){K=[],J=$(),i=k("INP"),n=A(e,i,r,t.reportAllChanges)})))}((function(e){re(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r,n=[2500,4e3],i=V(),o=k("LCP"),a=function(e){var t=e[e.length-1];if(t){var n=t.startTime-b();n<i.firstHiddenTime&&(o.value=n,o.entries=[t],r())}},s=E("largest-contentful-paint",a);if(s){r=A(e,o,n,t.reportAllChanges);var c=function(){Z[o.id]||(a(s.takeRecords()),s.disconnect(),Z[o.id]=!0,r(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),P(c,!0),T((function(i){o=k("LCP"),r=A(e,o,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,Z[o.id]=!0,r(!0)}))}))}))}}((function(e){re(e.name,e.value,e.rating)})),ee((function(e){re(e.name,e.value,e.rating)}))},re=function(e,t,r){var n,i,o=(null==t?void 0:t.toFixed(3))||"-1",a=parseFloat(o),s={name:"Ms.Webi.MeePortal.WebVitals",content:{area:ne(),metric:e,metricValue:a,rating:r,url:null===(n=window.BradburyTelemetry)||void 0===n?void 0:n.bi.getCurrentLocation(),pageName:null===(i=window.BradburyTelemetry)||void 0===i?void 0:i.bi.getCurrentPageId()}};window.BradburyTelemetry.qos.reportRawEvent(s)};function ne(){return y}window.portalTelemetryGlobals={initializePortalTelemetry:function(e){var t,r=d.concat(e.queryStringParametersBlockList||[]);t=r.join("|"),n=new RegExp("\\b(".concat(t,")=([^\\&$]+)"),"ig"),e.providerOptions.urlScrubber=u;var o=new i.n(e.providerOptions),s={normalizePropertyValue:c},m=new i.d(s);if(e.providerOptions.language&&m.setProperty("market",e.providerOptions.language),o.setCorrelationContextManager(m),o.setUtilityFunctions({overrideRequestQosData:f,globalUrlScrubber:u,resourceNameScrubber:p}),e.oneDSOptions){e.oneDSOptions.useJsll3xQuirks=!0;var g=window.OneDS;g.initialize(e.oneDSOptions,e.providerOptions),o.setCorrelationVectorManager(g.CorrelationVectorManager),o.registerBiSink(g.BiSink),o.registerQosSink(new w(e.portalAreaName,g.ClientQosSink)),o.registerScenariosSink(g.ScenarioSink),o.registerPerfSink(g.PerformanceSink),o.registerExperimentsSink(g.ExperimentsSink),o.registerTelemetryConfigurationUpdateSink(g.TelemetryConfigurationUpdateSink),e.oneDSOptions.overrideRequestQosData=f;var h=new i.i(e.oneDSOptions,g.CorrelationVectorManager,m,g.ClientQosSink);o.setAjaxTelemetrySink(h),e.logWebVitals&&te()}y=e.portalAreaName,o.useAsGlobalTelemetryProvider(),window.__bradbury=o,function(e){window.portalBi=e.bi,window.portalExperiments=e.experiments,window.portalQos=e.qos,window.portalClientPerf=e.perf,window.portalScenarios=e.scenarios,window.portalCv=e.cv,window.portalCc=e.cc,a.a.portalAjaxGet=e.ajax.ajaxGet,a.a.portalAjaxPost=e.ajax.ajaxPost,a.a.portalAjaxPut=e.ajax.ajaxPut,a.a.portalAjaxDelete=e.ajax.ajaxDelete,a.a.getAntiForgeryToken=e.ajax.getAntiForgeryToken,a.a.mockAjaxOperationResult=e.ajax.mockAjaxOperationResult,a.a.clearAjaxOperationMocks=e.ajax.clearAjaxOperationMocks}(window.BradburyTelemetry),l()},reportScriptLoaded:function(e,t){setTimeout((function(){window.BradburyTelemetry.qos.reportRawEvent({name:i.h,content:{"Ms.Webi.MeePortal.LoadScript":{scriptName:e,success:t}}})}),0)},getPortalAreaName:ne,globalUrlScrubber:u,resourceNameScrubber:p}},7:function(t,r){t.exports=e},8:function(e,t,r){"use strict";var n=function(){function e(t){var r=this;if(this.options=t,this.context={},this.maxResultLength=1024,this.serialize=function(){var t=Object.keys(r.context);if(!t.length)return"";for(var n=["v=1"],i=0,o=t;i<o.length;i++){var a=o[i],s=e.contextKeyMap[a]||encodeURIComponent(a),c=r.options.normalizePropertyValue&&r.options.normalizePropertyValue(a,r.context[a])||r.context[a];n.push("".concat(s,"=").concat(encodeURIComponent(c)))}var u=n.join(",");return u.length>r.maxResultLength?"":u},this.getProperty=function(e){return r.context[e]},this.setProperty=function(e,t){t&&(r.context[e]=t)},this.deleteProperty=function(e){return!!r.context[e]&&(delete r.context[e],!0)},!t)throw new Error("options must be specified.")}return e.contextKeyMap={"app-id":"ms.a.app.id","app-version":"ms.a.app.ver","device-class":"ms.a.device.deviceClass","device-id":"ms.a.device.id","partner-id":"ms.b.tel.partner","product-id":"ms.b.tel.product","scenario-id":"ms.b.tel.scenario","scenario-step":"ms.c.ust.scenarioStep","user-id":"ms.a.user.id","root-operation":"ms.b.qos.rootOperationName",market:"ms.b.tel.market"},e}(),i=r(7),o=r.n(i),a=-1,s=1,c=2,u=0,p=1,d=document.referrer,l=document.cookie;function f(e){var t=e||m;return{getLocationHref:function(){return t(window.spaLocationHref||window.location.href)},getRealLocationHref:function(){return t(window.location.href)},getSpaLocationHref:function(){return t(window.spaLocationHref||"")},getReferrer:function(){return t((window.spaReferrer||d).split("?")[0]||"")},getPageId:y,getQueryParameter:g,getCookie:h,getPerformanceTiming:function(){return window.performance&&window.performance.timing||{}},getNow:function(){return new Date},isPageOptedOutFromAutoPageView:v,setSpaLocationHref:function(e){window.spaLocationHref=e},setSpaReferrer:function(e){window.spaReferrer=e},setSpaPageId:function(e){window.spaPageId=e},setWindowLoadHandler:function(e){o()(window).on("load",e)}}}function m(e){return e}function g(e){return function(e,t){var r=new RegExp("".concat(e,"=([^&]+)"),"i"),n=t.match(r);return n&&2===n.length?n[1]:""}(e,window.location.search)}function h(e){for(var t=e.toLowerCase(),r=l.split(";"),n=0;n<r.length;n++){var i=r[n].split("="),o=decodeURIComponent(i[0].trim().toLowerCase()),a=i.length>1?i[1]:"";if(o===t)return decodeURIComponent(a)}return""}function v(){return!!o()("meta[name='noAutoPageView']").length}function S(e){var t=document.createElement("a");return t.href=e,t}function y(){return window.spaPageId||function(){var e=document.querySelector("html > head").getElementsByTagName("meta").namedItem("pageid");if(e)return e.getAttribute("content");return null}()||document.title}(function(){var e,t,r=h("oref");if(r)d=r,e="oref",(t=new Date).setDate(t.getDate()-1),function(e,t,r,n){void 0===n&&(n="/");var i=r;i||(i=new Date).setDate(i.getDate()+1);var o="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";expires=").concat(i.toUTCString(),";path=").concat(n);document.cookie=o}(e,"",t)})(),d=function(e,t){if(e&&!/^https:\/\/login\.live[\-\.]/i.test(e)&&!/^https:\/\/login\.microsoftonline\.com/i.test(e)&&!/^https:\/\/login\.windows-ppe\.net/i.test(e)&&!/^http(s?):\/\/directvisit/i.test(e))return e;if(!t)return e;var r=t.match(/\brefd=([0-9a-z\.\-]+)\b/i);if(!r||2!==r.length)return e;var n="https://".concat(r[1].toLowerCase(),"/"),i=t.match(/\brefp=([0-9a-z\.\-]+)\b/i);return i&&2===i.length&&(n+=i[1].replace("-","/").toLowerCase()),n}(d,window.location.search);var w=function(){function e(t,r,n,i){var u=this;if(this.options=t,this.cvManager=r,this.ccManager=n,this.qosLogger=i,this.willChangeSupportCors=!1,this.alwaysAddCvToRequestHeader=!0,this.timers={},this.mockedAjaxOps={},this.hostIdx=2,this.portIdx=3,this.minServerErrorStatusCode=500,this.maxServerErrorStatusCode=600,this.retryTimeout=50,this.cv1Length=16,this.cv2Length=22,this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.cv1Constants={validationPattern:new RegExp("^[".concat(this.base64CharSet,"]{").concat(16..toString(),"}(.[0-9]+)+$")),maxCorrelationVectorLength:63},this.cv2Constants={validationPattern:new RegExp("^[".concat(this.base64CharSet,"]{").concat(22..toString(),"}(.[0-9]+)+$")),maxCorrelationVectorLength:127},this.ajaxGet=function(e){return u.prepareRequest(e),u.flattenDataAndAppendAntiForgeryToken(e,a),u.sendRequest(e,u.getImpl)},this.ajaxPost=function(e){return u.prepareRequest(e),u.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),u.sendRequest(e,u.postImpl)},this.ajaxPut=function(e){return u.prepareRequest(e),u.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),u.sendRequest(e,u.putImpl)},this.ajaxDelete=function(e){return u.prepareRequest(e),u.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),u.sendRequest(e,u.delImpl)},this.getAntiForgeryToken=function(e,t){for(var r=e&&typeof e==typeof window?e:window,n=t&&"string"==typeof t?"_".concat(t.toString()):"",i="__RequestVerificationToken".concat(n),o=r.document.getElementsByTagName("input"),a=0;a<o.length;a++){var s=o[a];if("hidden"===s.type&&s.name===i)return{name:i,value:s.value}}return{}},this.mockAjaxOperationResult=function(e,t){if(!e)throw new Error("operationName must be specified.");if(!t)throw new Error("result must be specified.");u.mockedAjaxOps[e.toLowerCase()]=t},this.clearAjaxOperationMocks=function(){u.mockedAjaxOps={}},this.targetUriOverrideCallbackFunction=function(e){return e},this.getAntiForgeryTokenForRequest=function(e){return e.token?e.token:u.getAntiForgeryToken(e.tokenWindow,e.appPath)},this.prepareRequest=function(t){if(!t.serviceName)throw new Error("AjaxTelemetrySink: settings.serviceName is not set.");if(!t.operationName)throw new Error("AjaxTelemetrySink: settings.operationName is not set.");if(t.currentOperationName=t.parentOperationName||t.operationName,t.additionalHeaders=t.additionalHeaders||[],t.requestedWithHeaderBehavior&&"query"!==t.requestedWithHeaderBehavior)"header"===t.requestedWithHeaderBehavior&&(t.additionalHeaders["X-Requested-With"]="XMLHttpRequest");else if(t.url){var r=S(t.url);r.search+=(r.search?"&":"?")+"X-Requested-With=XMLHttpRequest",t.url=r.href}u.options.useJsll3xQuirks&&("auto"!==t.dataType?t.dataType=t.dataType||"json":delete t.dataType),u.cvManager.incrementCv(),t.cV=u.cvManager.getCurrentCvValue();var n=u.ccManager.serialize();n&&(void 0===t.addCvToRequestHeader||t.addCvToRequestHeader)&&(t.additionalHeaders["Correlation-Context"]=n),t.cache&&(t.noCacheBusting=!0),(u.options.overrideRequestQosData||t.overrideRequestQosData)&&(t.QosCallback=e.overrideRequestQosData.bind(u,u.options,t)),t.antiforgeryTokenBehavior||(u.isCrossDomainRequest(t)?t.antiforgeryTokenBehavior=a:u.isJsonContentType(t)&&(t.antiforgeryTokenBehavior=c))},this.flattenDataAndAppendAntiForgeryToken=function(e,t){var r=t||s,n=e.data;switch(n&&"string"!=typeof n&&(n=o.a.param(n)),r){case s:u.getTokenAndExecuteCommandIfTokenIsValid(e,(function(e){n=n?"".concat(n,"&"):"",n+="".concat(encodeURIComponent(e.name),"=").concat(encodeURIComponent(e.value))}));break;case c:u.getTokenAndExecuteCommandIfTokenIsValid(e,(function(t){e.additionalHeaders[encodeURIComponent(t.name)]=encodeURIComponent(t.value)}));break;case a:break;default:throw new Error("Unsupported AntiforgeryTokenBehavior: ".concat(r))}e.data=n},this.isJsonContentType=function(e){return!!e.contentType&&"string"==typeof e.contentType&&-1!==e.contentType.indexOf("json")},this.isCrossDomainRequest=function(e){var t;try{t=location.href}catch(e){var r=document.createElement("a");r.href="",t=r.href}var n=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,i=n.exec(t.toLowerCase()),o=n.exec(e.url?e.url.toLowerCase():"");return!(!(o&&o.length>3&&i&&i.length>3)||o[1]===i[1]&&o[u.hostIdx]===i[u.hostIdx]&&(o[u.portIdx]||("http:"===o[1]?"80":"443"))===(i[u.portIdx]||("http:"===i[1]?"80":"443")))},this.sendRequest=function(e,t){if(e.operationName){var r=e.operationName.toLowerCase();if(u.mockedAjaxOps[r]){var n=u.mockedAjaxOps[r],i=o.a.Deferred();return setTimeout((function(){n(i)})),i}}return t(e)},this.postImpl=function(e){return e.method="POST",u.makeRequest(e)},this.getImpl=function(e){return e.method="GET",u.makeRequest(e)},this.putImpl=function(e){return e.method="PUT",u.makeRequest(e)},this.delImpl=function(e){return e.method="DELETE",u.makeRequest(e)},this.makeRequest=function(e){var t=u;if("function"==typeof o.a){u.willChangeSupportCors&&(o.a.support.cors=!0);var r,n=e.additionalHeaders||{},i=e.body,a=i?JSON.stringify(i):e.data||void 0,s=e.maxRetry||0,c=0,p=e.operationName||e.url,d=e.errorFormatter||function(e){return e},l={url:e.url,type:e.method,data:a,crossDomain:!0,headers:{},success:e.success,timeout:e.timeout,error:e.error,jsonp:e.jsonp,jsonpCallback:e.jsonpCallback,cache:e.cache,beforeSend:function(i){if(e.contractVersion&&i.setRequestHeader("MS-Contract-Version",e.contractVersion),(!0===e.addCvToRequestHeader||!1!==e.addCvToRequestHeader&&t.alwaysAddCvToRequestHeader)&&t.isValid(r)&&i.setRequestHeader("MS-CV",r),n)for(var o in n)n.hasOwnProperty(o)&&i.setRequestHeader(o,n[o])}};e.dataType&&(l.dataType=e.dataType),e.noCacheBusting||(l.cache=!1),e.contentType&&(l.contentType=e.contentType),e.accept&&(l.headers.Accept=e.accept),e.accepts&&(l.accepts=e.accepts),e.async&&(l.async=e.async),e.xhrFields&&(l.xhrFields=e.xhrFields),e.complete&&(l.complete=e.complete),e.contents&&(l.contents=e.contents),e.context&&(l.context=e.context),e.dataFilter&&(l.dataFilter=e.dataFilter),e.global&&(l.global=e.global),e.ifModified&&(l.ifModified=e.ifModified),e.isLocal&&(l.isLocal=e.isLocal),e.mimeType&&(l.mimeType=e.mimeType),e.password&&(l.password=e.password),e.processData&&(l.processData=e.processData),e.scriptCharset&&(l.scriptCharset=e.scriptCharset),e.statusCode&&(l.statusCode=e.statusCode),e.traditional&&(l.traditional=e.traditional),e.type&&(l.type=e.type),e.username&&(l.username=e.username),e.xhr&&(l.xhr=e.xhr),r=u.isValid(e.cV)?e.cV:u.increment();var f=function(n,i,o){var a=n.getResponseHeader("Content-Length"),s={name:"Ms.Webi.OutgoingRequest",data:{cV:r,baseData:{operationName:e.currentOperationName,targetUri:t.targetUriOverrideCallbackFunction?t.targetUriOverrideCallbackFunction(l.url):l.url,latencyMs:o,serviceErrorCode:!i&&n.responseJSON&&n.responseJSON.code&&!isNaN(n.responseJSON.code)?n.responseJSON.code:-1,succeeded:i,requestMethod:l.type,responseContentType:l.dataType,protocolStatusCode:n.status.toString(),dependencyOperationName:p,dependencyOperationVersion:e.version&&e.version.toString(),dependencyName:e.serviceName,dependencyType:"WebService",responseSizeBytes:a&&parseInt(a,10)},baseType:"Ms.Qos.OutgoingServiceRequest",message:i?void 0:JSON.stringify(n.errorThrown),retryCount:c,customData:e.customDataCallBack&&"function"==typeof e.customDataCallBack?JSON.stringify(e.customDataCallBack(n)):void 0}};e.QosCallback&&"function"==typeof e.QosCallback&&e.QosCallback(n,s),t.reportEvent(s.data)},m=function(){var n="".concat(p,"_Retry_").concat(c);return t.recordTimeSpan(n,!1),o.a.ajax(l).then((function(e,r,i){var o=t.recordTimeSpan(n,!0);return f(i,!0,o),i}),(function(i,a){var u=t.recordTimeSpan(n,!0);f(i,!1,u);var p=o.a.Deferred();return s>c&&(0===i.status||i.status>=t.minServerErrorStatusCode&&i.status<t.maxServerErrorStatusCode)?(c++,r=t.isValid(e.cV)?t.incrementExternal(r):t.increment(),setTimeout((function(){m().done(p.resolve).fail(p.reject)}),t.retryTimeout)):p.reject(i,a),p.promise()}))};return m().then((function(e,t,r){return r}),(function(t){return d(t,e)}))}},this.isValid=function(e){if(e){var t=e.split(".")[0];if(t){if(t.length===u.cv1Length)return u.validateWithCv1(e);if(t.length===u.cv2Length)return u.validateWithCv2(e)}}return!1},this.validateWithCv1=function(e){return!!(u.cv1Constants.validationPattern.test(e)&&e.length<=u.cv1Constants.maxCorrelationVectorLength)},this.validateWithCv2=function(e){return!!(u.cv2Constants.validationPattern.test(e)&&e.length<=u.cv2Constants.maxCorrelationVectorLength)},this.increment=function(){return u.cvManager.incrementCv(),u.cvManager.getCurrentCvValue()},this.incrementExternal=function(e){if(u.isValid(e)){var t=e.split("."),r=t.length;t[r-1]=(parseInt(t[r-1],10)+1).toString();for(var n="",i=0;i<r;i++)n+=t[i],i<r-1&&(n+=".");var o=t[0].length===u.cv2Length?u.cv2Constants.maxCorrelationVectorLength:u.cv1Constants.maxCorrelationVectorLength;if(n.length<=o)return n}return""},this.reportEvent=function(e){var t=e.baseData,r={currentOperationName:t.operationName,operationName:t.dependencyOperationName,requestUri:t.targetUri,latencyMs:t.latencyMs,serviceErrorCode:t.serviceErrorCode,isSuccess:t.succeeded,httpMethod:t.requestMethod,contentType:t.responseContentType,httpStatusCode:t.protocolStatusCode,serviceName:t.dependencyName,serviceType:t.dependencyType,operationVersion:t.dependencyOperationVersion,responseSize:t.responseSizeBytes,errorMessage:e.message,retryCount:e.retryCount,customData:e.customData,cV:e.cV};u.qosLogger.reportOutgoingApi(r)},!t)throw new Error("options must be specified.");this.willChangeSupportCors=!1}return e.prototype.getTokenAndExecuteCommandIfTokenIsValid=function(e,t){var r=this.getAntiForgeryTokenForRequest(e);r&&t(r)},e.overrideRequestQosData=function(e,t,r,n){if((n||n.data)&&(t.overrideRequestQosData||e.overrideRequestQosData)){var i=n.data.baseData,o=n.data,a={isSuccess:i&&i.succeeded,latencyMs:i&&i.latencyMs,httpStatusCode:i&&i.protocolStatusCode,serviceErrorCode:i&&i.serviceErrorCode,errorMessage:o&&o.message};a.responseStatus=r.status,a.requestTimeout=t.timeout;var s=u;t.overrideRequestQosData&&(s=t.overrideRequestQosData(t,r,a)),u===s&&e.overrideRequestQosData&&(e.overrideRequestQosData(a),s=p),p===s&&(i&&(i.succeeded=a.isSuccess,i.latencyMs=a.latencyMs,i.protocolStatusCode=a.httpStatusCode,i.serviceErrorCode=a.serviceErrorCode),o&&(o.message=a.errorMessage))}},e.prototype.recordTimeSpan=function(e,t){var r=(new Date).getTime();return t?r-this.timers[e]:void(this.timers[e]=r)},e}(),C=function(){var e=this;this.ajaxGet=function(t){return e.performAjaxRequest("GET",t)},this.ajaxPost=function(t){return e.performAjaxRequest("POST",t)},this.ajaxPut=function(t){return e.performAjaxRequest("PUT",t)},this.ajaxDelete=function(t){return e.performAjaxRequest("DELETE",t)},this.getAntiForgeryToken=function(e,t){return{name:"antiforgery",value:"token"}},this.mockAjaxOperationResult=function(e,t){},this.clearAjaxOperationMocks=function(){},this.performAjaxRequest=function(e,t){return $.ajax($.extend({},t,{method:e}))}},T=function(){this.serialize=function(){return""},this.getProperty=function(e){return""},this.setProperty=function(e,t){},this.deleteProperty=function(e){return!1}},x=function(){this.getCurrentCvValue=function(){return"cv.1"},this.getCorrelationVectorFormFieldName=function(){return"cv"},this.seedCv=function(e){},this.incrementCv=function(){}},b=function(){function e(e){var t=this;this.options=e,this.initializationAttempt=0,this.initializers=[],this.biSinks=[],this.qosSinks=[],this.perfSinks=[],this.scenariosSinks=[],this.experimentsSinks=[],this.configurationUpdateSinks=[],this.pageViewOccurred=!1,this.executeOnPageViewQueue=[],this.maxErrorStringLength=100,this.timeoutMultiplier=100,this.scenarioStartPoints={},this.useAsGlobalTelemetryProvider=function(){window.BradburyTelemetry=t.toTelemetryProvider(),t.dom.setWindowLoadHandler(t.$notifyPageLoaded)},this.toTelemetryProvider=function(){return{cv:t.cvManager,cc:t.ccManager,qos:t,perf:t,bi:t,scenarios:t,experiments:t,ajax:t.ajaxTelemetry,utilities:t.utilities,configuration:t}},this.setCorrelationVectorManager=function(e){t.cvManager=e},this.setCorrelationContextManager=function(e){t.ccManager=e},this.setUtilityFunctions=function(e){t.utilities=e},this.setAjaxTelemetrySink=function(e){t.ajaxTelemetry=e},this.registerInitializer=function(e){t.initializers.push(e)},this.registerBiSink=function(e){t.biSinks.push(e)},this.registerQosSink=function(e){t.qosSinks.push(e)},this.registerPerfSink=function(e){t.perfSinks.push(e)},this.registerScenariosSink=function(e){t.scenariosSinks.push(e)},this.registerExperimentsSink=function(e){t.experimentsSinks.push(e)},this.registerTelemetryConfigurationUpdateSink=function(e){t.configurationUpdateSinks.push(e)},this.updateFlights=function(e){t.configurationUpdateSinks.forEach((function(t){return t.updateFlights(e)}))},this.updateUserPuid=function(e){t.configurationUpdateSinks.forEach((function(t){return t.updateUserPuid(e)}))},this.reportOutgoingApi=function(e){t.reportQosOperation((function(t){return t.reportOutgoingApi(e)}))},this.reportClientError=function(e){t.reportQosOperation((function(t){return t.reportClientError(e)}))},this.reportFatalError=function(e){t.reportQosOperation((function(t){return t.reportFatalError(e)}))},this.reportRawEvent=function(e){t.reportQosOperation((function(t){return t.reportRawEvent(e)}))},this.reportViewPerformanceMetrics=function(e,r){t.reportClientPerformance((function(t){return t.reportViewPerformanceMetrics(e,r)}))},this.$notifyPageLoaded=function(){t.setExperimentData(),t.reportBiOperation((function(e){return e.$notifyPageLoaded()})),t.options.allowAutoPageView&&!t.dom.isPageOptedOutFromAutoPageView()&&t.reportPageView({url:t.dom.getLocationHref(),viewId:t.dom.getPageId()})},this.reportClick=function(e){t.executeAfterPageView((function(){return t.reportBiOperation((function(t){return t.reportClick(e)}))}))},this.reportPartialView=function(e){t.executeAfterPageView((function(){return t.reportBiOperation((function(t){return t.reportPartialView(e)}))}))},this.reportPageView=function(e){if(t.setExperimentData(),e.$hosted)t.executeAfterPageView((function(){return t.reportBiOperation((function(t){return t.reportPageView(e)}))}));else{if(t.reportBiOperation((function(t){return t.reportPageView(e)})),t.executeOnPageViewQueue.length){var r=t.executeOnPageViewQueue;t.executeOnPageViewQueue=[];for(var n=0,i=r;n<i.length;n++){(0,i[n])()}}t.pageViewOccurred=!0}},this.reportSpaPageView=function(e){t.setExperimentData(),e.$hosted?t.executeAfterPageView((function(){return t.reportSpaPageViewImpl(e)})):t.reportSpaPageViewImpl(e)},this.getDefaultPlt=function(){return e=t.dom,r=e.getNow().getTime(),((n=e.getPerformanceTiming()).domComplete||r)-(n.fetchStart||r)||0;var e,r,n},this.getCurrentLocation=function(){return t.dom.getLocationHref()},this.getCurrentReferrer=function(){return t.dom.getReferrer()},this.getCurrentPageId=function(){return t.dom.getPageId()},this.getTrafficOriginator=function(){return t.dom.getCookie("tref").toLowerCase()},this.beginScenario=function(e,r,n){return t.$beginScenario({area:e,name:r,currentStep:"!START",attribution:n&&n.attribution,data:n&&n.data}),r},this.beginMultiStepScenario=function(e,r,n,i){return t.$beginScenario({area:e,name:r,currentStep:"!START",nextStep:n,attribution:i&&i.attribution,data:i&&i.data}),r},this.endScenario=function(e){t.$completeStep({area:e.area,name:e.name,currentStep:"!START",nextStep:t.getVirtualStepNameForTaskResult(!1,e),successful:e.isSuccess,canceled:!1,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data,timeMsec:t.calculateScenarioTime(e)})},this.cancelScenario=function(e){t.$completeStep({area:e.area,name:e.name,currentStep:"!START",nextStep:t.getVirtualStepNameForTaskResult(!0,e),successful:e.isSuccess,canceled:!0,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data,timeMsec:t.calculateScenarioTime(e)})},this.endStep=function(e){t.$completeStep({area:e.area,name:e.name,isStep:!0,currentStep:e.step,nextStep:e.next,successful:e.isSuccess,canceled:!1,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data})},this.cancelStep=function(e){t.$completeStep({area:e.area,name:e.name,isStep:!0,currentStep:e.step,nextStep:e.next,successful:e.isSuccess,canceled:!0,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data})},this.endMultiStepScenario=function(e){t.$completeStep({area:e.area,name:e.name,currentStep:e.step,nextStep:t.getVirtualStepNameForTaskResult(!1,e),successful:e.isSuccess,canceled:!1,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,timeMsec:t.calculateScenarioTime(e),data:e.data})},this.cancelMultiStepScenario=function(e){t.$completeStep({area:e.area,name:e.name,currentStep:e.step,nextStep:t.getVirtualStepNameForTaskResult(!0,e),successful:e.isSuccess,canceled:!0,error:t.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,timeMsec:t.calculateScenarioTime(e),data:e.data})},this.$beginScenario=function(e){t.ccManager.deleteProperty("scenario-id"),t.ccManager.deleteProperty("scenario-step"),t.ccManager.setProperty("scenario-id",t.getCorrelationScenarioId(e)),e.nextStep&&t.ccManager.setProperty("scenario-step",e.nextStep),t.executeAfterPageView((function(){var r=t.createScenarioId(e.area,e.name);t.scenarioStartPoints[r]=t.dom.getNow().getTime(),e.attribution=t.populateScenarioAttribution(e.attribution||{}),e.market=t.options.market,e.language=t.options.language,t.reportScenarioEvent((function(t){return t.$beginScenario(e)}))}))},this.$completeStep=function(e){t.ccManager.deleteProperty("scenario-id"),t.ccManager.deleteProperty("scenario-step"),e.isStep&&(t.ccManager.setProperty("scenario-id",t.getCorrelationScenarioId(e)),e.nextStep&&t.ccManager.setProperty("scenario-step",e.nextStep)),t.executeAfterPageView((function(){e.attribution=t.populateScenarioAttribution(e.attribution||{}),e.market=t.options.market,e.language=t.options.language,t.reportScenarioEvent((function(t){return t.$completeStep(e)}))}))},this.reportExperimentTrigger=function(e){t.reportExperimentOperation((function(t){return t.reportExperimentTrigger(e)}))},this.getCorrelationScenarioId=function(e){return"".concat(e.area,".").concat(e.name)},this.executeAfterPageView=function(e){t.pageViewOccurred||t.options.$ignorePageViewQueue?e():t.executeOnPageViewQueue.push(e)},this.reportBiOperation=function(e){if(!t.initializers.length||t.initializeTelemetry((function(){return t.reportBiOperation(e)})))for(var r=0,n=t.biSinks;r<n.length;r++){var i=n[r];e(i)}},this.reportQosOperation=function(e){if(!t.initializers.length||t.initializeTelemetry((function(){return t.reportQosOperation(e)})))for(var r=0,n=t.qosSinks;r<n.length;r++){var i=n[r];e(i)}},this.reportClientPerformance=function(e){if(!t.initializers.length||t.initializeTelemetry((function(){return t.reportClientPerformance(e)})))for(var r=0,n=t.perfSinks;r<n.length;r++){var i=n[r];e(i)}},this.reportScenarioEvent=function(e){if(!t.initializers.length||t.initializeTelemetry((function(){return t.reportScenarioEvent(e)})))for(var r=0,n=t.scenariosSinks;r<n.length;r++){var i=n[r];e(i)}},this.reportExperimentOperation=function(e){if(!t.initializers.length||t.initializeTelemetry((function(){return t.reportExperimentOperation(e)})))for(var r=0,n=t.experimentsSinks;r<n.length;r++){var i=n[r];e(i)}},this.reportSpaPageViewImpl=function(e){var r,n,i=S(t.dom.getRealLocationHref()),o=t.dom.getSpaLocationHref();t.dom.setSpaPageId(e.viewId),t.dom.setSpaLocationHref("".concat(i.protocol.toLowerCase(),"//").concat(i.host.toLowerCase()).concat((r=e.path,n=r||"/","/"!==n[0]&&(n="/".concat(n)),n)).concat(i.search)),o&&t.dom.setSpaReferrer(o),t.reportPageView({url:t.dom.getLocationHref(),viewId:e.viewId,pltMsec:e.pltMsec,$internalIsSpa:!0})},this.createScenarioId=function(e,t){return"".concat(e,".").concat(t)},this.calculateScenarioTime=function(e){var r=t.createScenarioId(e.area,e.name),n=0;return t.scenarioStartPoints[r]&&(n=t.dom.getNow().getTime()-t.scenarioStartPoints[r],delete t.scenarioStartPoints[r]),n},this.getVirtualStepNameForTaskResult=function(e,t){return e?t.isSuccess?"!CANCELOK":"!CANCELFAIL":t.isSuccess?"!OK":"!FAIL"},this.getSafeStepErrorCodeValue=function(e){var r=e;return(r=(r=r||"").substr(0,t.maxErrorStringLength))&&!/^[0-9a-zA-Z-_. ]+$/.test(r)&&(r="InvalidErrorCodeValue_ReadDocumentation"),r},this.populateScenarioAttribution=function(e){var r=t.getTrafficOriginator(),n=(e.flow||t.dom.getQueryParameter("fref")).toLowerCase();return n||(n=r?"ext":"int"),r||(r="int"),e.origin=r,e.flow=n,e.owner=(e.owner||"").toLowerCase(),e},this.initializeTelemetry=function(e){if(!t.initializers.length)return!0;for(var r=[],n=0,i=t.initializers;n<i.length;n++){var o=i[n];o.initialize(t.initializationAttempt)||r.push(o)}return r.length?(t.initializationAttempt++,t.initializers=r,setTimeout(e,t.initializationAttempt*t.timeoutMultiplier),!1):(t.initializers=[],!0)},this.dom=e.dom||f(e.urlScrubber),this.cvManager=new x,this.ccManager=new T,this.ajaxTelemetry=new C,this.utilities={}}return e.prototype.setExperimentData=function(){this.reportExperimentOperation((function(e){return e.setExperimentData()}))},e}();r.d(t,"a",(function(){return"Ms.Web.ClientError"})),r.d(t,"b",(function(){return"Ms.Osgs.ClientReliability"})),r.d(t,"c",(function(){return"Ms.Web.ContentUpdate"})),r.d(t,"e",(function(){return"Ms.Webi.MeePortal.Error"})),r.d(t,"f",(function(){return"Ms.Osgs.ExperimentTrigger"})),r.d(t,"g",(function(){return"Ms.Webi.MeePortal.UserFeedbackV2"})),r.d(t,"h",(function(){return"Ms.Webi.MeePortal.LoadScript"})),r.d(t,"k",(function(){return"Ms.Web.PageAction"})),r.d(t,"l",(function(){return"Ms.Web.PageUnload"})),r.d(t,"m",(function(){return"Ms.Web.PageView"})),r.d(t,"j",(function(){return"Ms.Qos.OutgoingServiceRequest"})),r.d(t,"d",(function(){return n})),r.d(t,"i",(function(){return w})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return m})),r.d(t,"p",(function(){return f}))}})}));
