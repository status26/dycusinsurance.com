jQuery.fn.liveSearch=function(a){var b=jQuery.extend({url:"/search-results.php?q=",id:"jquery-live-search",duration:400,typeDelay:200,triggerLength:4,loadingClass:"live-search-loading",onSlideUp:function(){},onShowLiveSearch:function(){},uptadePosition:!1,keepTypingPrompt:"keep typing"},a),c=jQuery("#"+b.id);return c.length||(c=jQuery('<div id="'+b.id+'"></div>').appendTo(document.body).hide().slideUp(0),console.log(b.id),jQuery(document.body).click(function(a){var d=jQuery(a.target);d.is("#"+b.id)||d.parents("#"+b.id).length||d.is("input")||c.slideUp(b.duration,function(){b.onSlideUp()})})),this.each(function(){var a=(jQuery(this).bind("hideLiveSearch",function(){g()}),jQuery(this).attr("autocomplete","off")),d=parseInt(c.css("paddingLeft"),10)+parseInt(c.css("paddingRight"),10)+parseInt(c.css("borderLeftWidth"),10)+parseInt(c.css("borderRightWidth"),10),e=function(){var b=a.offset(),e={left:b.left,top:b.top,width:a.outerWidth(),height:a.outerHeight()};e.topPos=e.top+e.height,e.totalWidth=e.width-d,c.css({position:"absolute",left:e.left+"px",top:e.topPos+"px",width:e.totalWidth+"px"})},f=function(){a.attr("aria-expanded","true"),jQuery(this).attr("aria-expanded","true"),jQuery("#s").attr("aria-expanded","true"),e(),jQuery(window).unbind("resize",e),jQuery(window).bind("resize",e),b.onShowLiveSearch(),c.slideDown(b.duration)},g=function(){c.slideUp(b.duration,function(){b.onSlideUp(),a.attr("aria-expanded","false"),jQuery(this).attr("aria-expanded","false"),jQuery("#s").attr("aria-expanded","false")})};a.focus(function(){""!==this.value&&(""===c.html()?(this.lastValue="",a.keyup()):setTimeout(f,1))}).keyup(function(){if(0==this.value.length)return this.timer&&clearTimeout(this.timer),g(),void(this.lastValue=this.value);if(this.value.length<=b.triggerLength)return this.timer&&clearTimeout(this.timer),c.html(b.keepTypingPrompt),f(),void(this.lastValue=this.value);if(this.value!=this.lastValue){a.addClass(b.loadingClass);var d=encodeURIComponent(this.value);this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){jQuery.get(b.url+d,function(e){a.removeClass(b.loadingClass),e.length&&d.length?(c.html(e),f()):g()})},b.typeDelay),this.lastValue=this.value}})})},jQuery(document).ready(function(a){"use strict";function b(){var b=a("#"+d),c=b.offset().top,g=b.height(),h=c+g,i=(e.height(),a(f).find("li.hkb-searchresults__current")),j=null;void 0===i?j=0:(j=i.offset(),j=void 0===j?0:j.top);var k=null;k=void 0===i?0:i.height();var l=null;l=void 0===i?0:i.index();var m=k+j,n=b.scrollTop(),o=a(f).children("li").length;return 0===l?void b.scrollTop(0):l+1==o?void b.scrollTop(g+2*k):m>h?void b.scrollTop(n+k):j<c?void b.scrollTop(n-k):void 0}console.log("hkb-livesearch-js loaded");var c=window.hkbJSSettings,d="hkb-jquery-live-search",e=a(".hkb-site-search__field").liveSearch({url:c.liveSearchUrl,keepTypingPrompt:c.keepTypingPrompt,id:d,onShowLiveSearch:i,triggerLength:c.triggerLength}),f=".hkb-searchresults",g=null,h=e.parents("form"),i=function(){null!=g&&g.removeClass("hkb-searchresults__current")};e.bind("keydown",function(c){switch(c.keyCode){case 9:return;case 40:c.preventDefault(),c.stopPropagation(),a(f).css("display","block"),null===g||g.length<=0?g=a(f).find("li").first().addClass("hkb-searchresults__current"):(i(),g=g.next("li").length<=0?a(f).find("li").first().addClass("hkb-searchresults__current"):g.next("li").addClass("hkb-searchresults__current")),b();break;case 38:c.preventDefault(),c.stopPropagation(),null===g||g.length<=0?g=a(f).find("li").last().addClass("hkb-searchresults__current"):(i(),g=g.prev("li").length<=0?a(f).find("li").last().addClass("hkb-searchresults__current"):g.prev("li").addClass("hkb-searchresults__current")),b();break;case 13:if(a(f).find(".current").length>0&&(g=a(f).find(".hkb-searchresults__current")),null!==g&&g.length>0){c.preventDefault(),c.stopPropagation();var d=g.find("a").first().attr("href");a(".hkb-searchresults").hide(),i(),g=null,window.location.href=d;break}h.first().submit();break;case 27:e.trigger("hideLiveSearch")}}),c.focusSearchBox&&(window.location.hash||jQuery(".hkb-site-search__field").focus())}),jQuery(document).ready(function(a){"use strict";function b(){a(".ht-voting-links a").each(function(e){var f=a(this),g=f.hasClass("enabled"),h=f.attr("data-direction"),i=f.attr("data-type"),j=f.attr("data-nonce"),k=f.attr("data-id"),l=f.attr("data-allow"),m=f.attr("data-display");f.click(function(e){if(e.preventDefault(),!g){var f=a(".voting-login-required").attr("data-ht-voting-must-log-in-msg");return void alert(f)}var n={action:"ht_voting",direction:h,type:i,nonce:j,id:k,allow:l,display:m};a.post(voting.ajaxurl,n,function(e){""!==e&&("post"==i?(a("#ht-voting-post-"+k).replaceWith(e),d("#ht-voting-post-"+k)):"comment"==i&&(a("#ht-voting-comment-"+k).slideUp(500),a("#ht-voting-comment-"+k).replaceWith(e),a("#ht-voting-comment-"+k).slideDown(1e3)),b(),c())})})})}function c(){a(".ht-voting-comment").each(function(b){var c=a(this),d=c.attr("data-vote-key"),e=c.hasClass("enabled"),f=c.attr("data-nonce"),g=c.attr("data-id");c.children("button").click(function(b){var h=c.children("textarea").val();if(b.preventDefault(),!e){var i=a(".voting-login-required").attr("data-ht-voting-must-log-in-msg");return void alert(i)}var j={action:"ht_voting_update_feedback",key:d,nonce:f,comment:h,id:g};a.post(voting.ajaxurl,j,function(a){c.slideUp(500,function(){""!==a&&c.html(a),c.slideDown(1e3)})})})})}function d(b){var c=a(b),d=c.find(".ht-voting-comment").first();d.hide(),d.slideDown(1e3,function(){d.find("textarea").focus()})}console.log("hkb-voting-frontend-js loaded"),b(),window.globalEnablePostVoting=function(){b()}}),jQuery(document).ready(function(a){"use strict";console.log("ht-exits-frontend loaded"),a("a.hkb_widget_exit__btn").each(function(b){var c=a(this),d=c.attr("data-ht-kb-exit-href");c.attr("href",d)})});